## Nodejs技术栈公众号随笔

```ini
说明: 记录公众号的关键知识与内容，拓宽自己的知识面

```



### *2022-01-18*前端领域架构模式：“干净架构”

> 什么是干净架构

干净架构是一种根据应用程序的领域（`domain`）的相似程度来拆分职责和功能的方法。通常分为三层，

![image-20220118092726852](nodejs技术栈日记.assets\image-20220118092726852.png)

- 领域层

  改变某些用例的时候不会变的那一部分，

  会描述应用程序主题区域的实体和数据，以及转换该数据的代码

  例：领域就是产品、订单、用户、购物车以及更新这些数据的方法

- 应用层

  用例：向服务器发送请求、执行领域转换、使用响应的数据更新UI

  端口被认为是一个现实世界和应用程序之间的"缓冲区"

- 适配器层

  可以降低代码和外部第三方服务的耦合

  驱动型、被动型

  离中心越远，代码的功能就越 “面向服务”

- 依赖规则

  三层架构有一个依赖规则：只有外层可以依赖内层

  领域必须独立

  应用层可以依赖领域

  最外层可以依赖任何东西



> 干净架构优势

- 独立领域

  所有应用的核心功能都被拆分并统一维护在一个地方—领域

- 独立用例

  用例的代码也是扁平的，并且容易测试，扩展性强

- 可替换的第三方服务

  只要我们不改接口，那么实现这个接口的是哪个第三方服务都没关系

> 干净架构成本

需要更多时间

有时显得多余

上手更困难

代码量增加

> 如何降低成本

抽象领域，遵守依赖原则，尝试写适配器

![image-20220118103509642](nodejs技术栈日记.assets\image-20220118103509642.png)

项目目录结构举例

![image-20220118103640787](nodejs技术栈日记.assets\image-20220118103640787.png)



#### 实现细节

> 共享内核

在实践中，共享内核可以这样解释：我们用到 `TypeScript`，使用它的标准类型库，但我们不会把它们看作是一个依赖项。这是因为使用它们的模块互相不会产生影响并且可以保持解耦。